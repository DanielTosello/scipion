package particlepicker;

import ij.ImagePlus;
import ij.gui.ImageCanvas;

import java.awt.Rectangle;

import particlepicker.training.model.TrainingParticle;

public abstract class ParticlePickerCanvas extends ImageCanvas
{

	public ParticlePickerCanvas(ImagePlus imp)
	{
		super(imp);
		// TODO Auto-generated constructor stub
	}

	public void moveTo(TrainingParticle p)
	{
		int width = (int) getSrcRect().getWidth();
		int height = (int) getSrcRect().getHeight();
		int x0 = p.getX() - width / 2;
		if(x0 < 0)
			x0 = 0;
		if(x0 + width > imp.getWidth())
			x0 = imp.getWidth() - width;
		int y0 = p.getY() - height / 2;
		if(y0 < 0)
			y0 = 0;
		if(y0 + height > imp.getHeight())
			y0 = imp.getHeight() - height;
		Rectangle r = new Rectangle(x0, y0, width, height);
		if (!getSrcRect().contains(r))
		{
			setSourceRect(r);
			repaint();
		}
	}

}
