{% extends 'base_flex.html' %}
{% block title %} - Project {{projectName}}{% endblock %}

{% block head %}
<!-- CSS -->
<link href={{css}} rel="stylesheet" type="text/css">
<link href={{messi_css}} rel="stylesheet" type="text/css">
<link href="{{jquery_ui}}" rel="stylesheet" type="text/css">
<style>
	html, body {	
		width: 100%;
		height: 100%;
		padding: 0;
		margin: 0;
		/* font-size: 0.75em; */
		/* overflow: hidden; */
	}

	section, aside{
		font-size: 0.75em !important;
	}

	.layout-outer {
		height: 100%;
		min-height: 100%;
	}

	.center, .west, .north, .south {
		/* background-color: rgb(220,220,220); */
		/* border: 1px solid rgb(200,200,200); */
		/* text-align: center; */
        display: inline-block;
	}

	.layout-outer > .west {
		width: 25%;
		/* margin-right:10px; */
		padding: 20px;
		min-width: 200px;
		overflow-y: auto;
		overflow-x: hidden;
		
	}
	
	.layout-outer > .center{
		padding: 20px;
	}

	.layout-outer > .north {
		/* height: 20%; */
	}
	.layout-outer > .south {
		/* height: 20%; */
	}
	/**
	 * To get correct percentages widths and heights in the inner layout
	 * you have to set the container to take up all space that's left after
	 * the outer columns east, west, north and south components. In this case:
	 *  width = 100% - 8% - 8% = 84%
	 *  height = 100% - 10% - 10% = 80%
	 */
	.layout-inner {
		width: 75%;
		/* height: 60%; */
		height: 100%
		background-color: white;
		border: 0px;
		
	}
	
	.layout-inner > .north {
		height: 80%;
		margin-bottom: 30px;
		max-height: 70%;
	} 

	.layout-inner > .center {
		z-index:10;
		min-height: 100px;
	} 

/* 	.layout-inner .west {
		width: 25%;
	}

	.layout-inner .south, .layout-inner .north {
		height: 20%;
	} */
</style>

<!-- JS Libs -->
<script src={{jquery_cookie}} type="text/javascript"></script>
<script src={{jquery_treeview}} type="text/javascript"></script>
<script src={{utils}} type="text/javascript"></script>
<script src={{project_content_utils}} type="text/javascript"></script>
<script src={{graph_utils}} type="text/javascript"></script>
<script type="text/javascript">
	jQuery(function($) {
		// Just call the inner layout once to initialize it. This
		// must happen before the outer layout is initialized. It
		// will be automatically resized when the outer layout is
		// resized.
		$('.layout-inner').layout();

		var outerContainer = $('.layout-outer');

		function layout() {
			outerContainer.layout({resize: false});
		}
		layout();

		$(window).resize(layout);

		
		{% if contentConfig == 'divided' %}
			$('.layout-inner > .north').resizable({
				handles: 's',
				stop: layout
			});
			$('.layout-inner > .center').resizable({
				handles: 's',
				stop: layout
			});
		{% endif %}
		// This selector is changed to only select the west and east
		// components of the outer layout.
		$('.layout-outer > .west').resizable({
			handles: 'e',
			stop: layout
		});
	});
</script>
<script>	
	$(function() {
    	$("#tabs").tabs();
    	$("#browser").treeview();
    	{% if graphView %}
    		switchGraph()
    	{% endif %}
  	});
</script>
{% endblock %} 

{% block sideLeft %}
<div id="westContainer">
	<div class="viewTree">
		<label>Workflow View: </label>
		<select id="viewsTree" name="viewsTree" onChange="javascript:changeTreeView();">
			<!-- <option value=""></option> -->
		</select>
	</div> 
	<div class="protFieldsetTree">
		<ul id="browser" class="filetree">
			{% for section in sections %}
			<li><span class="section">{{section.name}}</span>
				<ul>
					{% for prot in section.childs %} {% if prot.tag == 'protocol'%}
					<li><span class="protocol"><a
							href="javascript:popup('/form/?protocolClass={{prot.protClass}}')">{{prot.name}}</a></span></li>
					{% elif prot.tag == 'protocol_base' %}
					<li class="closed"><span class="protocol_base">{{prot.name}}</span>
						<ul>
							{% for prot2 in prot.childs %}
							<li><span class="protocol_class"> <a
									href="javascript:popup('/form/?protocolClass={{prot2.name}}')">
										{{prot2.name}} </a>
							</span></li> {% endfor %}
						</ul></li> {% else %} No athletes. {% endif %} {% endfor %}
				</ul>
			</li> {% endfor %}
		</ul>
	</div>
</div>
{% endblock %} 

{% block contentNorth %}
<span style="float:right;">
	<div id="treeTool">
		<a href="javascript:switchGraph();">
			<img src="{{treeTool}}" /> Tree</a>	
	</div>
	<div id="listTool" style="display:none;">
		<a  href="javascript:switchGraph();" >
			<img src="{{listTool}}" /> List</a>
	</div>
</span>
<div id="toolbar" style="display: none;">
	<span><a id="editTool" href=""><img src="{{editTool}}" />Edit</a></span>
	<span><a id="copyTool" href=""><img src="{{copyTool}}" />Copy</a></span>
	<span><a id="deleteTool" href=""><img src="{{deleteTool}}" />Delete</a></span>
	<span><a id="browseTool" href=""><img src="{{browseTool}}" />Browse</a></span>
	<span id="stopTool"><a id="stopTool" href=""><img src="{{stopTool}}" />Stop</a></span>
	<span id="analyzeTool"><a id="analyzeTool" href=""><img src="{{analyzeTool}}" />Analyze Results</a></span>
</div>
<div id="runTable">	
	<table id="data" cellspacing="0">
		<tr>
			{% for colName, colWidth in provider.getColumns %}
			<th>{{colName}}</th> {% endfor %}
		</tr>
		{% for obj in provider.getObjects %}
		<tr id="{{obj.getObjId}}" class="runtr" data-name="{{obj.getName}}"
			onclick='javascript:launchToolbarList("{{projectName}}","{{obj.getObjId}}", ($(this)));'
			style="background-color: #fafafa;">
			<td><a
				href="javascript:popup('/form/?protocolId={{obj.getObjId}}')">
					{% if obj.getObjLabel == '' %} 
						{{obj.getName}}
					{% else %} 
						{{obj.getObjLabel}} 
					{% endif %}
						</a></td>
			<td>{{obj.status.get}}</td>
			<td>{{obj.getElapsedTime}}</td>
		</tr>
		{% endfor %}
	</table>
</div>
<div id="graphActiv" style="display: none;" data-mode="inactive"
	data-time="first" data-project="{{projectName}}" data-option="">
	<h3>History</h3>
</div>
{% endblock %}

{% block contentCenter %}
<div class="tabContaier" id="tabs">
	<ul class="listTabs">
		<li><a href="#tab-data">Data</a></li>
		<li><a href="#tab-summary">Summary</a></li>
	</ul>
	<div id="tab-data" class="tabContents">
		<div id="listEx">
			<ul>
				<li><strong>Input</strong>
					<ul id='protocol_input'></ul>
				</li><br />
				<li><strong>Output</strong>
					<ul id='protocol_output'></ul>
				
			</ul>
		</div>
	</div>
	<div id="tab-summary" class="tabContents">
			<p>No summary information.</p>
	</div>
</div>
{% endblock %}
